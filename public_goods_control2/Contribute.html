{{ extends "global/Page.html" }}
{{ block title }}投资决策{{ endblock }}
{{ block content }}

    <p>
        你现在拥有<strong> {{ C.ENDOWMENT }} </strong>初始代币。    
    <p>
        <strong>你抽到的角色是：{{ player_role }}</strong>
    </p>

    <p class="rule">
        <strong>你的游戏收益=你剩余的代币数＋公共池分配</strong>
    </p>

    <p class="rule">
            <strong>例如：</strong>如果你往公共池投入1个代币，剩下19个，而你们小组四人总共往公共池投入了10个代币，那么公共池翻倍后变成20个，平均每人分5个，你最终有19+5=24个代币。
    </p>
    
    {{ formfields }}

    <button class="otree-btn-next btn btn-primary" type="submit">下一步</button>

{{ endblock }}

{{ block styles }}
<style>
    /* 隐藏反应时和页面加载时间字段 */
    #id_reaction_time, #id_page_load_time {
        display: none;
    }
    label[for="id_reaction_time"], label[for="id_page_load_time"] {
        display: none;
    }
    /* 隐藏左上角的标题，但保留其位置 */
    .otree-title, h1 { visibility: hidden !important; }
    /* 将next按钮移到右下角 */
    .otree-btn-next {
        float: right !important;
        margin-top: 20px !important;
    }
</style>
{{ endblock }}

{{ block scripts }}
<script>
    // 记录页面加载时间（毫秒）
    var pageLoadTime = Date.now();
    document.getElementById('id_page_load_time').value = pageLoadTime;
    
    // 在表单提交时计算反应时
    document.querySelector('form').addEventListener('submit', function(e) {
        var submitTime = Date.now();
        var reactionTime = (submitTime - pageLoadTime)/1000;
        document.getElementById('id_reaction_time').value = reactionTime;
    });
</script>
{{ endblock }}

